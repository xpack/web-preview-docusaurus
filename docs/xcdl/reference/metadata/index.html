<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>The XCDL metadata reference (outdated) | The xPack Build Framework (DEPRECATED)</title>
<link rel="stylesheet" href="https://xpack.github.io/css/syntax.css">


<link type="application/atom+xml" rel="alternate" href="https://xpack.github.io/feed.xml"/>
<link type="application/rss+xml" rel="alternate" title="web-archive-jekyll" href="https://xpack.github.io/feed.xml">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The XCDL metadata reference (outdated) | web-archive-jekyll</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="The XCDL metadata reference (outdated)" />
<meta name="author" content="Liviu Ionescu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<meta property="og:description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<link rel="canonical" href="https://xpack.github.io/xcdl/reference/metadata/" />
<meta property="og:url" content="https://xpack.github.io/xcdl/reference/metadata/" />
<meta property="og:site_name" content="web-archive-jekyll" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-11-15T10:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The XCDL metadata reference (outdated)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Liviu Ionescu"},"dateModified":"2024-12-20T19:13:52+00:00","datePublished":"2015-11-15T10:00:00+00:00","description":"Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.","headline":"The XCDL metadata reference (outdated)","mainEntityOfPage":{"@type":"WebPage","@id":"https://xpack.github.io/xcdl/reference/metadata/"},"url":"https://xpack.github.io/xcdl/reference/metadata/"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://xpack.github.io/css/modern-business.css?202412202113">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://xpack.github.io/css/customstyles.css?202412202113">
<link rel="stylesheet" href="https://xpack.github.io/css/boxshadowproperties.css?202412202113">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="https://xpack.github.io/css/theme-blue.css?202412202113">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://xpack.github.io/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="https://xpack.github.io/js/toc.js"></script>
<script src="https://xpack.github.io/js/customscripts.js"></script>

<!-- Use absolute URLs, to cover preview cases too -->
<link rel="shortcut icon" href="https://xpack.github.io/images/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://xpack.github.io/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://xpack.github.io/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://xpack.github.io/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://xpack.github.io/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://xpack.github.io/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://xpack.github.io/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://xpack.github.io/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://xpack.github.io/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://xpack.github.io/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://xpack.github.io/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xpack.github.io/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://xpack.github.io/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://xpack.github.io/images/favicon/favicon-16x16.png">
<link rel="manifest" href="https://xpack.github.io/images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://xpack.github.io/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks" style="">
        <div style="display: inline-block; float: left; margin-top: 8px; margin-left: auto; margin-right: 10px;"><img src="/images/company_logo.png" alt="logo" width="32px" height="32px"/></div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> The xPack Project</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">News<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/news/">Latest News</a></li>
                        
                        
                        
                        <li><a href="/news/archive/">Archive</a></li>
                        
                        
                        
                        <li><a href="/tags/">Tags</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://xpack-dev-tools.github.io" target="_blank" rel="noopener">xPack Binary Development Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://eclipse-embed-cdt.github.io" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://micro-os-plus.github.io" target="_blank" rel="noopener">µOS++ IIIe</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GitHub<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://github.com/xpack/" target="_blank" rel="noopener">xPack</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-dev-tools/" target="_blank" rel="noopener">3rd Party xPack Dev Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/micro-os-plus/" target="_blank" rel="noopener">µOS++ IIIe</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-3rd-party/" target="_blank" rel="noopener">3rd Party xPacks</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/eclipse-embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="The XCDL metadata reference (outdated)">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3 sticky" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">xcdl </li>
  
  
  
      
  
  <li>
      <a title="Getting Started" href="#">Getting Started</a>
      <ul>
          
          
          
          <li><a title="Overview" href="/xcdl/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Old home page" href="/xcdl/outdated/">Old home page</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar.
this is critical so that the parent expands when you're viewing a page.
This must appear below the sidebar code above. Otherwise, if placed
inside customscripts.js, the script runs before the sidebar code runs
and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">The XCDL metadata reference (outdated)</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

        


   <blockquote>
  <p>Note: This file needs to be updated for JSON.</p>
</blockquote>

<h2 id="introduction">Introduction</h2>

<p>This chapter contains reference information for the main XCDL objects <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>; and <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code>, followed by the various properties such as <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> in alphabetical order.</p>

<h2 id="mandatory-properties">Mandatory properties</h2>

<p>All hierarchical objects must have the following properties defined:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;object name="..."&gt;</code> - the internal identifier of the object, unique within the set of all configuration trees used together; passed as an XML attribute</li>
</ul>

<p>Although not mandatory, it is strongly recommended to also define the following object properties:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;display&gt;...&lt;/display&gt;</code> - a short, human readable, descriptive name (a few words) of the object, to be used in the user interface during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;description&gt;...&lt;/description&gt;</code> - a long, comprehensive description of the object, to be used as reference by the user during the configuration process.</li>
</ul>

<h2 id="the-option-object">The <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> object</h2>

<h3 id="purpose">Purpose</h3>

<p>Define a single configuration option.</p>

<h3 id="syntax">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<h3 id="description">Description</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> object is the basic unit of configurability. Generally each option corresponds to a single user choice. Typically there is a certain amount of information associated with an option to assist the user in manipulating that option, for example a textual description. There will also be some limits on the possible values that the user can choose, so an option may be a simple yes-or-no choice or it may be something more complicated such as an array size or a device name. Options may have associated constraints, so if that option is enabled then certain conditions have to satisfied elsewhere in the configuration. Options usually have direct consequences such as preprocessor <code class="language-plaintext highlighter-rouge">#define</code> symbols in a configuration header file.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> is defined as a XML element that has one name attribute and a body. Within a single configuration, names must be unique. If a configuration contained two packages which defined the same entity, any references to that entity in a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property or any other expression would be ambiguous. It is possible for a given name to be used by two different packages if those packages should never be loaded into a single configuration. For example, architectural HAL packages are allowed to reuse names because a single configuration cannot target two different architectures. For a recommended naming convention see the Section called Package Contents and Layout in <a href="/xcdl/guide/packages">XCDL packages</a>.</p>

<p>The user choice is expressed during the configuration process and is reflected in the enabled/disabled statues of the option. For options with associated values, it is also possible for the user to define a value (if missing, a default value, either implicit or defined as the property <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code>, is applied). For these options it is also possible to define some limits on the possible values that the user can choose.</p>

<p>A separate class of options are the <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> options, whose values cannot be set by the user, but are computed according to a given expression.</p>

<p>Options may have associated constraints, so if this option is enabled then certain conditions have to be satisfied elsewhere in the configuration for it to be active (the <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> property) or it may mandate for some objects to be enabled or disabled (the <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property).</p>

<p>If active and enabled, <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> can generate preprocessor <code class="language-plaintext highlighter-rouge">#define</code> lines in a configuration header file (if the <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> property is also defined), and decide if a set of source files are included in the build process (if the <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property is also defined).</p>

<h3 id="containers">Containers</h3>

<p><em>Options</em> are not containers, so they cannot hold other objects (like <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>).</p>

<h3 id="optional-properties">Optional properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> - a list of expressions to be evaluated; if all are true, the active state of this option remains true</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> - provides additional grouping information, to allow a configuration tool to provide appropriate selection (board | synthetic | root | architecture | family)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> - the option’s value is not directly user-modifiable, it is calculated using a suitable expression</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> - a boolean expression that provides additional information to a configuration tool, to control if this option can be enabled/disabled by the user during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultEnabled&gt;</code> - a boolean expression that provides an initial value for the option enabled/disabled state</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> - an expression to be used as a default value for this option, when the user does not define it explicitly during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> - a valid C preprocessor identifier to be defined in the header file if the option is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> - the full path file name of the header where the option will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> - a list of ids of the interfaces implemented by this option</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> - a list of restrictions the value of this options must satisfy</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> - provides a method to break the default hierarchy and directly specify the id of the parent of this option</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> - a list of ids of other objects to be enabled when this option is enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> - a list of source files that should be built if this option is active and enabled</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> - specify the type of the variable associated with this option (none</td>
          <td>bool</td>
          <td>int</td>
          <td>float</td>
          <td>string)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> - control how the option’s value will appear in the configuration header file</li>
</ul>

<h3 id="example">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="preconditions"&gt;

  &lt;parent&gt;infra/debug&lt;/parent&gt;
  &lt;display&gt;Preconditions&lt;/display&gt;
  &lt;description&gt;This option allows individual control of preconditions.
  A precondition is one type of assert, which it is
  useful to control separately from more general asserts.
  The function is OS_PRECONDITION(condition,msg).&lt;/description&gt;

  &lt;generatedDefinition&gt;OS_DEBUG_INFRA_DEBUG_PRECONDITIONS&lt;/generatedDefinition&gt;
  &lt;defaultEnable&gt;true&lt;/defaultEnable&gt;
&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-component-object">The <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> object</h2>

<h3 id="purpose-1">Purpose</h3>

<p>Define a component, a collection of configuration objects.</p>

<h3 id="syntax-1">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/component&gt;
</code></pre></div></div>

<h3 id="description-1">Description</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> object is a configuration element that can contain additional options and subcomponents. A <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> can have the same properties as an <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>. There is an additional property, <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> which allows configuration data to be split into multiple files, included below the current object in the configuration hierarchy.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> object is implemented as a XML element that has one name attribute and a body. Within a single configuration, names must be unique. If a configuration contained two packages which defined the same entity, any references to that entity in a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property or any other expression would be ambiguous. It is possible for a given name to be used by two different packages if those packages should never be loaded into a single configuration. For example, architectural HAL packages are allowed to reuse certain names because a single configuration cannot target two different architectures. For a recommended naming convention see the Section called Package Contents and Layout in <a href="/xcdl/guide/packages">XCDL packages</a>.</p>

<p>Similarly to <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> objects, if active and enabled, <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> objects can generate preprocessor <code class="language-plaintext highlighter-rouge">#define</code> lines in a configuration header file, and decide if a set of source files are included in the build process.</p>

<h3 id="containers-1">Containers</h3>

<p><em>Components</em> are containers, so it is possible for a component to include <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;configuration&gt;</code> objects that should go below this object in the configuration hierarchy. These objects can be defined either as embedded children, or can be read from included files.</p>

<h3 id="optional-properties-1">Optional properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> - a list of expressions to be evaluated; if all are true, the active state of this component remains true</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> - provides additional grouping information, to allow a configuration tool to provide appropriate selections (board</td>
          <td>synthetic</td>
          <td>root</td>
          <td>architecture</td>
          <td>family)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> - the full path file name of the header where the children nodes will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> - the component’s value is not directly user-modifiable, it is calculated using a suitable expression</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> - a boolean expression that provides additional information to a configuration tool, to control if this component can be enabled/disabled by the user during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultEnabled&gt;</code> - a boolean expression that provides an initial value for the component enabled/disabled state</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> - an expression to be used as a default value for this component, when the user does not define it explicitly during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> - a valid C preprocessor identifier to be defined in the header file if the component is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> - the full path file name of the header where the component will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> - a list of ids of the interfaces implemented by this component</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> - a list of XCDL metadata files to be parsed and whose objects to be included as children of the current node</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> - a list of restrictions the value of this component must satisfy</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> - provides a method to break the default hierarchy and directly specify the id of the parent of this component</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> - a list of ids of other objects to be enabled when this component is enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> - a list of source files that should be built if this component is active and enabled</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> - specify the type of the variable associated with this component (none</td>
          <td>bool</td>
          <td>int</td>
          <td>float</td>
          <td>string)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> - control how the component’s value will appear in the configuration header file</li>
</ul>

<h3 id="example-1">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="useAsserts"&gt;

  &lt;display&gt;Use asserts&lt;/display&gt;
  &lt;description&gt;If this component is enabled, assertions in the code are
  tested at run-time. Assert functions (OS_ASSERT()) are
  defined in ’include/os/infra/os_ass.h’ within the ’install’
  tree. If the component is disabled, these result in no
  additional object code and no checking of the asserted
  conditions.&lt;/description&gt;

  &lt;defaultEnable&gt;true&lt;/defaultEnable&gt;
  &lt;includeXcdl&gt;assert.xml&lt;/includeXcdl&gt;
&lt;/component&gt;
</code></pre></div></div>

<h2 id="the-package-object">The <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> object</h2>

<h3 id="purpose-2">Purpose</h3>

<p>Define a package, a special component, that can be distributed separately.</p>

<h3 id="syntax-2">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;package name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/package &gt;
</code></pre></div></div>

<h3 id="description-2">Description</h3>

<p>A <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> is a unit of software distribution. It is also a configuration option in that users can choose whether or not a particular package is loaded into the configuration, and which version of that package should be loaded. It is also a component in that it can contain additional components and options in a hierarchy.</p>

<p>A <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> can have most of the properties and behaviour of a <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, but with some limitations (see the Unavailable properties below)</p>

<p>The top-level XCDL script for a package should begin with a <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> object.</p>

<h3 id="containers-2">Containers</h3>

<p><em>Packages</em> are inherently containers, so they include <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;toolchain&gt;</code> objects that should go below this object in the configuration hierarchy.</p>

<h3 id="optional-properties-2">Optional properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> - a list of expressions to be evaluated; if all are true, the active state of this package remains true</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> - provides additional grouping information, to allow a configuration tool to provide appropriate selections (board</td>
          <td>synthetic</td>
          <td>root</td>
          <td>architecture</td>
          <td>family)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> - the full path file name of the header where the children nodes will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultEnabled&gt;</code> - a boolean expression that provides an initial value for the package enabled/disabled state</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> - an expression to be used as a default value for this package, when the user does not define it explicitly during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> - a valid C preprocessor identifier to be defined in the header file if the package is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> - the full path file name of the header where the package will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> - a list of ids of the interfaces implemented by this package</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> - a list of XCDL metadata files to be parsed and whose objects to be included as children of the current node</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> - provides a method to break the default hierarchy and directly specify the id of the parent of this package</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> - a list of ids of other objects to be enabled when this package is enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> - a list of source files that should be built if this package is active and enabled</li>
</ul>

<h3 id="unavailable-properties">Unavailable properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> - the package’s value cannot be computed</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;configurable&gt;true&lt;/configurable&gt;</code> - packages can always be enabled/disabled by the user during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;none&lt;/valueType&gt;</code> - packages do not have an associated value (might be changed to return the package version, when implemented)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> - if the header definition is generated, the value will always be (1)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> - no restrictions can apply to package values</li>
</ul>

<h3 id="example-2">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;package name="infra"&gt;

  &lt;display&gt;Infrastructure&lt;/display&gt;
  &lt;description&gt;Common types and useful macros.
  Tracing and assertion facilities.
  Package startup options.&lt;/description&gt;

  &lt;generatedFile&gt;os/infra/infra.h&lt;/generatedFile&gt;
  &lt;generatedDefinition&gt;OS_PACKAGE_INFRA&lt;/generatedDefinition&gt;
  &lt;sourceFile&gt;startup.cpp&lt;/sourceFile&gt;
  &lt;sourceFile&gt;prestart.cpp&lt;/sourceFile&gt;
  &lt;sourceFile&gt;pkgstart.cpp&lt;/sourceFile&gt;
  &lt;sourceFile&gt;userstart.cpp&lt;/sourceFile&gt;

&lt;/package&gt;
</code></pre></div></div>

<h2 id="the-repository-object">The <code class="language-plaintext highlighter-rouge">&lt;repository&gt;</code> object</h2>

<h3 id="purpose-3">Purpose</h3>

<p>Define a repository, a special package.</p>

<h3 id="syntax-3">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;repository name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/repository&gt;
</code></pre></div></div>

<h3 id="description-3">Description</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;repository&gt;</code> object is the root node of a component repository. A <code class="language-plaintext highlighter-rouge">&lt;repository&gt;</code> can have all the properties and behaviour of a <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>.</p>

<h3 id="containers-3">Containers</h3>

<p><code class="language-plaintext highlighter-rouge">&lt;repository&gt;</code> are inherently containers, so they include <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> objects that should go below this object in the configuration hierarchy.</p>

<h3 id="optional-properties-3">Optional properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> - a list of expressions to be evaluated; if all are true, the active state of this repository remains true</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;buildSubFolder&gt;</code> - a subfolder below the build folder where the files related to this repository will be stored</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;category&gt;root&lt;/category&gt;</code> - provides additional grouping information, to allow a configuration tool to provide appropriate selections</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> - the full path file name of the header where the children nodes will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultEnabled&gt;</code> - a boolean expression that provides an initial value for the repository enabled/disabled state</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> - an expression to be used as a default value for this repository, when the user does not define it explicitly during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> - a valid C preprocessor identifier to be defined in the header file if the repository is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> - the full path file name of the header where the repository will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> - a list of ids of the interfaces implemented by this package</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> - a list of XCDL metadata files to be parsed and whose objects to be included as children of the current node</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> - a list of ids of other objects to be enabled when this package is enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> - a list of source files that should be built if this package is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourcesPaths&gt;</code> - a list of paths where to search for the sources files</li>
</ul>

<h3 id="unavailable-properties-1">Unavailable properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> - the repository’s value cannot be computed</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;configurable&gt;true&lt;/configurable&gt;</code> - repository can always be enabled/disabled by the user during the configuration process</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> - no restrictions can apply to repository values</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> - root nodes have no parents</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;none&lt;/valueType&gt;</code> - repository do not have an associated value (might be changed to return the package version, when implemented)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> - if the header definition is generated, the value will always be (1)</li>
</ul>

<h3 id="example-3">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;repository name="µOS++"&gt;

    &lt;display&gt;The µOS++ SE repository&lt;/display&gt;
    &lt;description&gt;All µOS++ Second Edition components are below this node.&lt;/description&gt;

    &lt;!-- Mark this as the root of the component repository (informative) --&gt;
    &lt;category&gt;root&lt;/category&gt;

    &lt;!-- The list of possible relative paths where the sources can be located,
    starting from package root folder.
    This value is inherited by all children. --&gt;
    &lt;sourcesPath&gt;src&lt;/sourcePath&gt;
    &lt;sourcesPath&gt;.&lt;/sourcePath&gt;

    &lt;!-- Each component tree will generate a subfolder below the build folder. --&gt;
    &lt;buildSubFolder&gt;micro-os-plus&lt;/buildSubFolder&gt;

    &lt;!-- The default dynamically generated header file, where all definitions that
    call for inclusions must be created. --&gt;
    &lt;generatedFile&gt;include/portable/core/include/XCDL_Build_Defines.h&lt;/generatedFile&gt;

    &lt;!-- The folders where to search for include files during build --&gt;

    &lt;!-- Each repository must contribute an include path to it's root. --&gt;
    &lt;buildIncludeFolder&gt;$(REPO_DIR)&lt;/buildIncludeFolder&gt;
    &lt;!-- In addition, the folder where the dynamically generated header files
     are stored is also used as include folder. --&gt;
    &lt;buildIncludeFolder&gt;$(BUILD_DIR)/include&lt;/buildIncludeFolder&gt;

&lt;/repository&gt;
</code></pre></div></div>

<h2 id="the-interface-object">The <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> object</h2>

<h3 id="purpose-4">Purpose</h3>

<p>Define an interface, a functionality that can be provided by a number of different implementations.</p>

<h3 id="syntax-4">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;interface name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/interface&gt;
</code></pre></div></div>

<h3 id="description-4">Description</h3>

<p>An <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> is a special type of computed <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> object. It provides an abstraction mechanism that can be used to simplify XCDL expressions. An <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> can have most of the properties and behaviour of an <code class="language-plaintext highlighter-rouge">&lt;object&gt;</code>, but with some limitations (see the Unavailable properties below)</p>

<p>As an example, suppose that some package relies on the presence of code that implements the standard kernel scheduling interface. However the requirement is no more stringent than this, so the constraint can be satisfied by the mlqueue scheduler, the bitmap scheduler, or any additional schedulers that may get implemented in the future. A first attempt at expressing the dependency might be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;requires&gt;isEnabled('kernel/schedMlqueue') || isEnabled('kernel/schedBitmap')&lt;/requires&gt;
</code></pre></div></div>

<p>This constraint is limited, it may need to be changed if a new scheduler were to be added to the system. Interfaces provide a way of expressing more general relationships:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;requires&gt;implementationsOf('kernel/scheduler') == 1&lt;/requires&gt;
</code></pre></div></div>

<p>The interface <em>kernel/scheduler</em> is implemented by both the mlqueue and bitmap schedulers, and may be implemented by future schedulers as well. The value of an interface is the number of implementers that are active and enabled, so in a typical configuration only one scheduler will be in use and the value of the interface will be 1. If all schedulers are disabled then the interface will have a value 0 and the <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> constraint will not be satisfied.</p>

<p>Some component writers may prefer to use the first <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> constraint on the grounds that the code will only have been tested with the mlqueue and bitmap schedulers and cannot be guaranteed to work with any new schedulers. Other component writers may take a more optimistic view and assume that their code will work with any scheduler until proven otherwise.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> is defined a XML element that has one name attribute and a body. Within a single configuration, names must be unique. If a configuration contained two packages which defined the same entity, any references to that entity in a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property or any other expression would be ambiguous. It is possible for a given name to be used by two different packages if those packages should never be loaded into a single configuration. For example, architectural HAL packages are allowed to reuse names because a single configuration cannot target two different architectures. For a recommended naming convention see the Section called Package Contents and Layout in <a href="/xcdl/guide/packages">XCDL packages</a>.</p>

<p>A commonly used constraint on interface values takes the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;requires&gt;implementationsOf('kernel/scheduler') == 1&lt;/requires&gt;
</code></pre></div></div>

<p>This constraint specifies that there can be only one scheduler in the system. In some circumstances it is possible for the configuration tools to detect this pattern and act accordingly, so for example enabling the bitmap scheduler would automatically disable the mlqueue scheduler.</p>

<h3 id="containers-4">Containers</h3>

<p><em>Interfaces</em> are not containers, so they cannot hold other objects such as <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> objects.</p>

<h3 id="optional-properties-4">Optional properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> - a list of expressions to be evaluated; if all are true, the active state of this interface remains true</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> - provides additional grouping information, to allow a configuration tool to provide appropriate selections (board</td>
          <td>synthetic</td>
          <td>root</td>
          <td>architecture</td>
          <td>family)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultEnabled&gt;</code> - a boolean expression that provides an initial value for the interface enabled/disabled state</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> - a valid C preprocessor identifier to be defined in the header file if the interface is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> - the full path file name of the header where the interface will generate a definition (if missing, inherited from the parent node)</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> - interfaces always have a small numerical value; the legalValues can be used to apply additional constraints such as an upper limit</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> - provides a method to break the default hierarchy and directly specify the id of the parent of this interface</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> - a list of ids of other objects to be enabled when this interface is enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> - a list of source files that should be built if this interface is active and enabled</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> - control how the interface’s value will appear in the configuration header file</li>
</ul>

<h3 id="unavailable-properties-2">Unavailable properties</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> - the interface’s value is always computed from the number of enable and active implementators</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> - interfaces are always enabled and this cannot be changed</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> - meaningless since the interface’s value is always computed</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> - interfaces cannot implemented other interfaces</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;int&lt;/valueType&gt;</code> - interfaces always have integer values</li>
</ul>

<h3 id="example-4">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;interface name="scheduler"&gt;
  &lt;display&gt;Number of schedulers in this configuration&lt;/display&gt;

  &lt;parent&gt;kernel&lt;/parent&gt;
  &lt;requires&gt;1 == implementationsOf('kernel/scheduler')&lt;/requires&gt;
&lt;/interface&gt;
</code></pre></div></div>

<h2 id="the-toolchain-object">The <code class="language-plaintext highlighter-rouge">&lt;toolchain&gt;</code> object</h2>

<h3 id="purpose-5">Purpose</h3>

<p>TBD.</p>

<h3 id="syntax-5">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;toolchain name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/toolchain&gt;
</code></pre></div></div>

<h3 id="description-5">Description</h3>

<p>TBD</p>

<h3 id="containers-5">Containers</h3>

<p><em>Toolchains</em> are containers, so they can hold other <code class="language-plaintext highlighter-rouge">&lt;toolchain&gt;</code> objects. <em>Toolchains</em> are generally hierarchical, and are placed below a <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> object.</p>

<h3 id="optional-properties-5">Optional properties</h3>

<ul>
  <li>compilerObjectsExtension</li>
  <li>compilerDepsOptions</li>
  <li>compilerOutputOptions</li>
  <li>compilerInputOptions</li>
  <li>compilerWarningOptions</li>
  <li>compilerMiscOptions</li>
  <li>compilerDebugOptions</li>
  <li>compilerOptimisationOptions</li>
  <li>compilerCpu</li>
  <li>compilerPreprocessorOptions</li>
  <li>linkerMiscOptions</li>
  <li>programNamePrefix</li>
  <li>programNameSuffix</li>
  <li>makeObjectsVariable</li>
  <li>children</li>
  <li>includeXcdl</li>
  <li>platformSystem</li>
  <li>parent</li>
  <li>category</li>
</ul>

<h3 id="tools">Tools</h3>

<ul>
  <li>cc</li>
  <li>cpp</li>
  <li>ld</li>
  <li>asm</li>
</ul>

<h3 id="example-5">Example</h3>

<p>TBD</p>

<h2 id="the-configuration-object">The <code class="language-plaintext highlighter-rouge">&lt;configuration&gt;</code> object</h2>

<h3 id="purpose-6">Purpose</h3>

<p>TBD.</p>

<h3 id="syntax-6">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;configuration name="..."&gt;

    &lt;display&gt;...&lt;/display&gt;
    &lt;description&gt;...&lt;/description&gt;

    ... other properties ...
    ... children objects ...

&lt;/configuration&gt;
</code></pre></div></div>

<h3 id="description-6">Description</h3>

<p>TBD</p>

<h3 id="containers-6">Containers</h3>

<p><em>Configurations</em> are containers, so they can hold other <code class="language-plaintext highlighter-rouge">&lt;configuration&gt;</code>. <code class="language-plaintext highlighter-rouge">&lt;configuration&gt;</code> are generally hierarchical, and they are placed below a <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> related to the source files where the main() artefact code is located.</p>

<h3 id="optional-properties-6">Optional properties</h3>

<ul>
  <li>artifactFileName</li>
  <li>buildConfigurationName</li>
  <li>buildFolder</li>
  <li>children</li>
  <li>loadPackages</li>
  <li>options</li>
  <li>preprocessorSymbols</li>
  <li>requires</li>
  <li>toolchain</li>
</ul>

<h3 id="example-6">Example</h3>

<p>TBD</p>

<h2 id="the-activeif-property">The <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> property</h2>

<h3 id="purpose-7">Purpose</h3>

<p>Allow additional control over the active state of a configuration object.</p>

<h3 id="syntax-7">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;activeIf&gt;condition 1&lt;/activeIf&gt;
  &lt;activeIf&gt;condition 2&lt;/activeIf&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> property is a condition to be evaluated, usually to check hardware properties; if all these expressions are true, the active state of this object is true. Multiple instances of this property are allowed.</p>

<h3 id="default-value">Default value</h3>

<p>If missing, no additional constraints are considered, the object is active.</p>

<h3 id="description-7">Description</h3>

<p>Configuration options or other objects may be either active or inactive. Typically this is controlled by the object’s location in the overall hierarchy. Consider the option OS_DEBUG_INFRA_DEBUG_PRECONDITIONS, which exists below the component OS_DEBUG_USE_ASSERT. If the whole component is disabled then all options it contains are inactive: there is no point in enabling preconditions unless there is generic assertion support; any requirements constraints associated with preconditions are irrelevant; any <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property or other build-related property is ignored.</p>

<p>In some cases the hierarchy does not provide sufficient control over whether or not a particular object should be active. For example, the math library could have support for floating point exceptions which is only worthwhile if the hardware implements appropriate functionality, as specified by the architectural HAL. The relevant math library configuration options should remain below the OS_PACKAGE_LIBM package in the overall hierarchy, but should be inactive unless there is appropriate hardware support. In cases like this an <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> property is appropriate.</p>

<p>Another common use of <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> properties is to avoid excessive nesting in the configuration hierarchy. If some option B is only relevant if option A is enabled, it is possible to turn A into a component that contains B. However adding another level to the hierarchy for a component which will contain just one entry may be considered excessive. In such cases it is possible for B to have an <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> dependency on A.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> takes a list of goal expressions as argument and all of the conditions have to be satisfied for the object to be active. For details of goal expression syntax see see the Section called Goal Expressions in <a href="/xcdl/guide/packages">XCDL packages</a>. In most cases the goal expressions will be very simple, often involving just one other object, but more complicated expressions can be used when appropriate.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> properties have certain similarities, but they serve a different purpose. Suppose there are two options A and B, and option B relies on functionality provided by A. This could be expressed as either <em>B activeIf A</em> or as <em>B requires A</em>. The points to note are:</p>

<ul>
  <li>If <em>B activeIf A</em> is used and A is disabled or inactive, then configuration (graphical) tools will generally prevent any attempt at modifying B. For example the text for B could be greyed out, and the associated check button (if B is a boolean option) would be disabled. If the user needs the functionality provided by option B then it is necessary to go to option A first and manipulate it appropriately.</li>
  <li>If <em>B requires A</em> is used and A is disabled or inactive, graphical tools will still allow B to be manipulated and enabled. This would result in a new conflict which may get resolved automatically or which may need user intervention.</li>
  <li>If there are hardware dependencies then an <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> condition is usually the preferred approach. There is no point in allowing the user to manipulate a configuration option if the corresponding functionality cannot possibly work on the currently selected hardware. Much the same argument applies to coarse-grained dependencies, for example if an option depends on the presence of a TCP/IP stack then an activeIf OS_PACKAGE_NET condition is appropriate: it may be possible to satisfy the condition, but it requires the fairly drastic step of loading another package; further more, if the user wanted a TCP/IP stack in the configuration then it would probably have been loaded already.</li>
  <li>If option B exists to provide additional debugging information about the functionality provided by A then again an <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> constraint is appropriate. There is no point in letting users enable extra debugging facilities for a feature that is not actually present.</li>
  <li>The configuration system’s inference engine will cope equally well with <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> properties. Suppose there is a conflict because some third option depends on B. If <em>B activeIf A</em> then the inference engine will attempt to make A active and enabled, and then to enable B if necessary. If B requires A then the inference engine will attempt to enable B and resolve the resulting conflict by causing A to be both active and enabled. Although the inference occurs in a different order, in most cases the effect will be the same.</li>
</ul>

<h3 id="example-7">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- Do not provide extra semaphore debugging if there are no semaphores --&gt;
&lt;option name="binsem"&gt;

  &lt;parent&gt;kernel/instrument&lt;/parent&gt;
  &lt;activeIf&gt;isEnabled('kernel/synch')&lt;/activeIf&gt;
  &lt;generatedDefinition&gt;OS_DEBUG_KERNEL_INSTRUMENT_BINSEM&lt;/generatedDefinition&gt;
  ...
&lt;/option&gt;

&lt;!-- Avoid another level in the configuration hierarchy --&gt;
&lt;option name="relay"&gt;

  &lt;parent&gt;kernel/synch/mutex/priorityInheritance/simple&lt;/parent&gt;
  &lt;activeIf&gt;isEnabled('kernel/synch/mutex/priorityInheritance/simple')&lt;/activeIf&gt;
  &lt;generatedDefinition&gt;OS_PACKAGE_KERNEL_SYNCH_MUTEX_PRIORITY_INHERITANCE_SIMPLE_RELAY&lt;/generatedDefinition&gt;
  ...
&lt;/option&gt;

&lt;!-- Functionality that is only relevant if another package is loaded --&gt;
&lt;option name="uitron compatibility"&gt;

  &lt;parent&gt;start&lt;/parent&gt;
  &lt;generatedDefinition&gt;OS_PACKAGE_START_UITRON_COMPATIBILITY&lt;/generatedDefinition&gt;
  &lt;activeIf&gt;isLoaded('uitron')&lt;/activeIf&gt;
  ...
&lt;/option&gt;

&lt;!-- Check that the hardware or HAL provide the appropriate functionality --&gt;
&lt;option name="break support"&gt;

  &lt;parent&gt;hal/debug/gdb/breakSupport&lt;/parent&gt;
  &lt;generatedDefinition&gt;OS_DEBUG_HAL_DEBUG_GDB_BREAK_SUPPORT&lt;/generatedDefinition&gt;
  &lt;activeIf&gt;isEnabled('hal/debug/gdb/stubsBreak')&lt;/activeIf&gt;
  ...
&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-category-property">The <code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> property</h2>

<h3 id="purpose-8">Purpose</h3>

<p>Define additional grouping information, to allow a configuration tool to provide appropriate selections.</p>

<h3 id="syntax-8">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;category&gt;string&lt;/category&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;category&gt;</code> property is a string.</p>

<h3 id="default-value-1">Default value</h3>

<p>If missing no category is assigned to the current object.</p>

<h3 id="description-8">Description</h3>

<p>Configuration tools usually should be able to provide some choices to various selections, for example to choose from the hardware platform the build is intended for. For this to work, specific packages should be marked with additional metadata, recognised by the configuration tools.</p>

<p>Examples of such metadata are:</p>

<ul>
  <li>‘board’ - for hardware boards</li>
  <li>‘synthetic’ - for synthetic platforms</li>
</ul>

<p>Other metadata can be purely informative, like the kind of the object:</p>

<ul>
  <li>‘root’</li>
  <li>‘architecture’</li>
  <li>‘family’</li>
</ul>

<p>It is recommended to use this extra metadata for <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> objects.</p>

<h3 id="example-8">Example</h3>

<p>TBD</p>

<h2 id="the-childrengeneratedfile-property">The <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> property</h2>

<h3 id="purpose-9">Purpose</h3>

<p>Specify the configuration header file that will be generated for the children of a given component.</p>

<h3 id="syntax-9">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;childrenGeneratedFile&gt;file name&lt;/childrenGeneratedFile&gt;

  ... other properties ...
  ... children objects ...

&lt;/component&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> property is a string containing a file name.</p>

<h3 id="default-value-2">Default value</h3>

<p>If missing, the definition from the parent node is used, first the <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> then <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code>.</p>

<h3 id="description-9">Description</h3>

<p>When the configuration tools generate a build tree, one of the steps is to output each objects’s configuration data to a header file. Instead of defining a <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> for each individual <em>Option</em> of a <em>Component</em>, it is recommended to define the file once, in the parent <em>Component</em>, and this definition will be used for all children nodes without a <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code>.</p>

<p>The name specified in a <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code> property will always be interpreted as relative to the build folder.</p>

<h3 id="example-9">Example</h3>

<p>TBD</p>

<h2 id="the-computed-property">The <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> property</h2>

<h3 id="purpose-10">Purpose</h3>

<p>Used if the current option’s value is not user-modifiable, but is computed using a suitable XCDL expression.</p>

<h3 id="syntax-10">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;computed&gt;expression&lt;/computed&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> property is an expression to be evaluated each time the object is refered.</p>

<h3 id="default-value-3">Default value</h3>

<p>If missing, no computed value is used.</p>

<h3 id="description-10">Description</h3>

<p>In some cases it is useful to have a configuration option whose value cannot be modified directly by the user. This can be achieved using a <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> property, which takes an XCDL expression as argument (see the Section called Ordinary Expressions in <a href="/xcdl/guide/packages">XCDL packages</a> for a description of expression syntax). The configuration system evaluates the expression whenever needed to generate the header line or when referred from another expression. The result depends on the object’s <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;none&lt;/valueType&gt;</code> - objects with this type have no value, so the computed property is not applicable</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;bool&lt;/valueType&gt;</code> - the expression should evaluate to a boolean value</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;number&lt;/valueType&gt;</code> - the expression should evaluate to a number, integer or float</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;valueType&gt;string&lt;/valueType&gt;</code> - the expression should evaluate to a string</li>
</ul>

<p>There are a number of valid uses for calculated options, and there are also many cases where some other XCDL facility would be more appropriate.</p>

<p>Valid uses of computed objects include the following:</p>

<ul>
  <li>
    <p>On some target hardware a particular feature may be user-configurable, while on other targets it is fixed. For example some processors can operate in either big-endian or little-endian mode, while other processors do not provide any choice. It is possible to have an option OS_BOOL_BIGENDIAN which is calculated in some architectural HAL packages but user-modifiable in others.</p>
  </li>
  <li>
    <p>Computed objects can provide an alternative way for one package to affect the behaviour of another one. Suppose a package may provide two possible implementations, a preferred one involving self-modifying code and a slower alternative. If the system involves a ROM bootstrap then the slower alternative must be used, but it would be inappropriate to modify the startup option in every HAL to impose constraints on this package. Instead it is possible to have a calculated option whose value is <code class="language-plaintext highlighter-rouge">{ OS_HAL_STARTUP == "ROM" }</code>, and which has appropriate consequences. Arguably this is a spurious example, and it should be a user choice whether or not to use self-modifying code with a defaultValue based on OS_HAL_STARTUP, but that is for the component writer to decide.</p>
  </li>
  <li>
    <p>Sometimes it should be possible to perform a particular test at compile-time, for example by using a C/C++ preprocessor <code class="language-plaintext highlighter-rouge">#if</code> construct. However the preprocessor has only limited functionality, for example it cannot perform string comparisons. XCDL expressions are more powerful.</p>
  </li>
  <li>
    <p>Occasionally a particular sub-expression may occur multiple times in a XCDL script. If the sub-expression is sufficiently complex then it may be worthwhile to have a calculated option whose value is the sub-expression, and then reference that calculated option in the appropriate places.</p>
  </li>
</ul>

<p>Alternatives to using calculated options include the following:</p>

<ul>
  <li>XCDL <em>Interfaces</em> are a form of computed objects intended as an abstraction mechanism. For example, an interface can be used to express the concept of any scheduler, as opposed to a specific one such as the bitmap scheduler.</li>
</ul>

<h3 id="example-10">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- A constant on some target hardware, perhaps user-modifiable on other targets. --&gt;
&lt;option name="period"&gt;

  &lt;parent&gt;hal/rtc&lt;/parent&gt;
  &lt;display&gt;Real-time clock period&lt;/display&gt;
  &lt;valueType&gt;int&lt;/valueType&gt;
  &lt;computed&gt;12500&lt;/computed&gt;
&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-configurable-property">The <code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> property</h2>

<h3 id="purpose-11">Purpose</h3>

<p>Define whether the current object can be manually changed by the user during the configuration process.</p>

<h3 id="syntax-11">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;configurable&gt;true | false | expression&lt;/configurable&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> property is the <em>true/false</em> constant or an expression evaluating to a boolean value.</p>

<h3 id="default-value-4">Default value</h3>

<p>If missing, the default is <em>true</em>, all objects are configurable.</p>

<h3 id="description-11">Description</h3>

<p>Most of the objects can be individually configured using the configuration (graphical) tools, but some are automatically computed and the user shouldn’t be allowed to change them.</p>

<p>Setting <code class="language-plaintext highlighter-rouge">&lt;configurable&gt;false&lt;/configurable&gt;</code> will instruct the configuration tools to no longer allow the user to enable/disable the object. For graphical tools, the object will be greyed.</p>

<p>Objects marked as non-configurable can still be active or inactive, this property does not affect the functional behaviour during builds, but only the behaviour of the configuration tools.</p>

<h3 id="example-11">Example</h3>

<p>TBD</p>

<h2 id="the-defaultenable-property">The <code class="language-plaintext highlighter-rouge">&lt;defaultEnable&gt;</code> property</h2>

<h3 id="purpose-12">Purpose</h3>

<p>Define whether the current object is initially enabled or not.</p>

<h3 id="syntax-12">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;defaultEnable&gt;true | false | expression&lt;/defaultEnable&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;defaultEnable&gt;</code> property is the <em>true/false</em> constant or an expression evaluating to a boolean value.</p>

<p>If the value is constant, it is evaluated when parsing the file, if the value is a string, it is evaluated in a separate step that process the entire configurations trees, before processing the requirements.</p>

<h3 id="default-value-5">Default value</h3>

<p>If missing, the default is <em>true</em>, all objects are enabled.</p>

<h3 id="description-12">Description</h3>

<p>The configuration trees are usually large, and not all objects are required in a specific configuration, so the need to individually enable/disable them.</p>

<p>This property controls the initial state of the object, since goal expressions can enable individual objects to satisfy requirements. Objects marked as enabled can still be active or inactive.</p>

<p>Disabling a component or package automatically disables all children objects.</p>

<h3 id="example-12">Example</h3>

<p>TBD</p>

<h2 id="the-defaultvalue-property">The <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property</h2>

<h3 id="purpose-13">Purpose</h3>

<p>Provide a default value for this option using an XCDL expression.</p>

<h3 id="syntax-13">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;defaultValue&gt;expression&lt;/defaultValue&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property is a string containing an expression to be evaluated each time the object is referred.</p>

<h3 id="default-value-6">Default value</h3>

<p>If missing the default object value depends on the object state, active objects have the value 1/true and non active objects have the value 0/false.</p>

<h3 id="description-13">Description</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property usually allows to define the default value for the object, in case no other value is set during configuration.</p>

<p>The arguments to the <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property should be an XCDL expression, see the Section called Ordinary Expressions in <a href="/xcdl/guide/packages">XCDL packages</a> for the syntactic details. In many cases a simple constant value will suffice.</p>

<p>However it is also possible for an object’s default value to depend on other objects. For example the common HAL package provides some support functions that are needed by the kernel, but are unlikely to be useful if the kernel is not being used.</p>

<p>If the kernel is loaded then this HAL option is automatically enabled, although the user can still disable it explicitly should this prove necessary. If the kernel is not loaded then the option is disabled, although it can still be enabled by the user if desired. <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> expressions can be more complicated than this if appropriate, and provide a very powerful facility for component writers who want their code to “just do the right thing” in a wide variety of configurations.</p>

<p>An object can have at most one <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property, and it is illegal to have both a <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> and a <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> property in one body. If an object does not have either a <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> or a <code class="language-plaintext highlighter-rouge">&lt;computed&gt;</code> property and it does not have the <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> none then the configuration tools will assume a default value expression of 1/true if the object is active and 0/false otherwise.</p>

<p>On occasion it is useful to have a configuration object A which has both a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> constraint on some other object B and a <code class="language-plaintext highlighter-rouge">&lt;defaultValue&gt;</code> expression of B. If option B is not enabled then A will also be disabled by default and no conflict arises. If B is enabled then A also becomes enabled and again no conflict arises. If a user attempts to enable B but not A then there will be a conflict. Users should be able to deduce that the two options are closely interlinked and should not be manipulated independently except in very unusual circumstances.</p>

<h3 id="example-13">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="threadSupport"&gt;

  &lt;parent&gt;hal/debug/gdb&lt;/parent&gt;
  &lt;display&gt;Include GDB multi-threading debug support&lt;/display&gt;
  &lt;description&gt;This option enables some extra HAL code which is needed
  to support multi-threaded source level debugging.&lt;/description&gt;

  &lt;generatedDefinition&gt;OS_DEBUG_HAL_DEBUG_GDB_THREAD_SUPPORT&lt;/generatedDefinition&gt;
  &lt;requires&gt;isEnabled('kernel/debug/gdb/threadSupport')&lt;/requires&gt;
  &lt;defaultValue&gt;valueOf('kernel/debug/gdb/threadSupport')&lt;/defaultValue&gt;

&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-generateddefinition-property">The <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> property</h2>

<h3 id="purpose-14">Purpose</h3>

<p>Define the name of the header variable to be generated.</p>

<h3 id="syntax-14">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;generatedDefinition&gt;name&lt;/generatedDefinition&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> property is a string containing a C/C++ preprocessor identifier.</p>

<h3 id="default-value-7">Default value</h3>

<p>If missing, no header definition is generated for this object.</p>

<h3 id="description-14">Description</h3>

<p>In order for a header definition to be generated, the full path of the include file where it will be added and the name of the preprocessor symbol is needed. The file name is provided by <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> and the preprocessor symbol by <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code>.</p>

<p>The name must be a valid C/C++ preprocessor identifier: a sequence of upper or lower case letters, digits or underscores, starting with a non-digit character; identifiers beginning with an underscore should normally be avoided because they may clash with system packages or with identifiers reserved for use by the compiler.</p>

<p>Within a single configuration, names must be unique. If a configuration contained two packages which defined the same entity <code class="language-plaintext highlighter-rouge">OS_INTEGER_SOME_OPTION</code>, any references to that entity in a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property or any other expression would be ambiguous. It is possible for a given name to be used by two different packages if those packages should never be loaded into a single configuration. For example, architectural HAL packages are allowed to reuse certain names because a single configuration cannot target two different architectures. For a recommended naming convention see the Section called Package Contents and Layout in <a href="/xcdl/guide/packages">XCDL packages</a>.</p>

<p>For active and enabled objects, if the <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> property is defined, a line with the following structure will be generated in the file pointed by the <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> property:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #define &lt;name&gt; &lt;value&gt;
</code></pre></div></div>

<p>The format of the value is defined by the <code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> property.</p>

<p>For objects with type string, a second line should be generated, with the value concatenated to the name (if the resulting string can somehow be represented as a C/C++ preprocessor identifier):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #define &lt;name&gt;_&lt;value&gt;
</code></pre></div></div>

<h3 id="example-14">Example</h3>

<p>TBD</p>

<h2 id="the-generatedfile-property">The <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> property</h2>

<h3 id="purpose-15">Purpose</h3>

<p>Specify the configuration header file that will be generated for a given component, usually a package.</p>

<h3 id="syntax-15">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;generatedFile&gt;file name&lt;/generatedFile&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the generatedFile property is a string containing a file name.</p>

<h3 id="default-value-8">Default value</h3>

<p>If missing, the definition from the parent node is used, first the <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code>, then the <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code>.</p>

<h3 id="description-15">Description</h3>

<p>When the configuration tools generate a build tree, one of the steps is to output each objects’s configuration data to a header file. For example the kernel’s configuration data gets output to <em>include/xcdl/kernel.h</em>. This allows each package’s source code to <code class="language-plaintext highlighter-rouge">#include</code> the appropriate header file and adapt to the choices made by the user.</p>

<p>If multiple nodes use the same file, it is recommended to define the file only once, in the parent node, using <code class="language-plaintext highlighter-rouge">&lt;childrenGeneratedFile&gt;</code>.</p>

<p>The name specified in a <code class="language-plaintext highlighter-rouge">&lt;generatedFile&gt;</code> property will always be interpreted as relative to the build folder.</p>

<h3 id="example-15">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;package name="arm"&gt;

  &lt;display&gt;ARM architecture&lt;/display&gt;
  &lt;parent&gt;hal&lt;/parent&gt;
  &lt;hardware/&gt;
  &lt;generatedFile&gt;os/hal/hal_arm.h&lt;/generatedFile&gt;
   ...
&lt;/package&gt;
</code></pre></div></div>

<h2 id="the-implements-property">The <code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> property</h2>

<h3 id="purpose-16">Purpose</h3>

<p>Inform the framework that one or more general interfaces are implemented.</p>

<h3 id="syntax-16">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;implements&gt;interface 1&lt;/implements&gt;
  &lt;implements&gt;interface 2&lt;/implements&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;implements&gt;</code> property is a list of ids of interfaces the object implements. Multiple instances of this property are allowed.</p>

<h3 id="default-value-9">Default value</h3>

<p>If missing it is assumed that the current object does not implement any interface.</p>

<h3 id="description-16">Description</h3>

<p>The XCDL interface concept provides an abstraction mechanism that can be useful in many different circumstances. Essentially an interface is a computed option whose value is the number of active and enabled objects which implement that interface. For example the <code class="language-plaintext highlighter-rouge">interface('kernel/scheduler')</code> has a value corresponding to the number of schedulers in the system, typically just one.</p>

<p>The implements property takes a single argument, which should be a list of ids of the implemented interfaces (an object may implement multiple interfaces). These interface may be defined in the same package as the implementor or in some other package. In the latter case it may sometimes be appropriate for the implementor or the implementor’s package to have a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property for the package containing the interface.</p>

<p>It is possible for an object to implement a given interface multiple times, but only distinct implementor ids are counted.</p>

<h3 id="example-16">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="schedMlqueue"&gt;

  &lt;parent&gt;kernel&lt;/parent&gt;
  &lt;display&gt;Multi-level queue scheduler&lt;/display&gt;

  &lt;generatedDefinition&gt;OS_PACKEGE_KERNEL_SCHED_MLQUEUE&lt;/generatedDefinition&gt;
  &lt;defaultEnable&gt;true&lt;/defaultEnable&gt;
  &lt;implements&gt;kernel/scheduler&lt;/implements&gt;
  ...
&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-includexcdl-property">The <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> property</h2>

<h3 id="purpose-17">Purpose</h3>

<p>Include additional configuration information from another XCDL definitions file.</p>

<h3 id="syntax-17">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;includeXcdl&gt;file 1&lt;/includeXcdl&gt;
  &lt;includeXcdl&gt;file 2&lt;/includeXcdl&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> property is a file name containing other XCDL definitions. Multiple properties are allowed.</p>

<h3 id="default-value-10">Default value</h3>

<p>If missing, no additional XCDL files are parsed as children of the current object.</p>

<h3 id="description-17">Description</h3>

<p>It is possible to define all the configuration options and sub-components for a given package in a single CDL script, either by nesting them in the appropriate command bodies, by extensive use of the parent property, or by some combination of these two. However for large packages this is inconvenient and it is better to split the raw configuration data over several different files. The <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> property can be used to achieve this. It takes a list of filenames as argument. If the package follows the directory layout conventions then the configuration tools will look for the specified file in the meta sub-directory of the package, otherwise it will look for the file relative to the package’s top-level directory.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> property can only occur in the body of an <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> object.</p>

<h3 id="example-17">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="OS_PACKAGE_UITRON_TASKS"&gt;

  &lt;display&gt;Tasks&lt;/display&gt;
  &lt;description&gt;uITRON Tasks are the basic blocks of multi-tasking
  in the uITRON world; they are threads or lightweight
  processes, sharing the address space and the CPU.
  They communicate using the primitives outlined above.
  Each has a stack, an entry point (a C or C++ function),
  and (where appropriate) a scheduling priority.&lt;description&gt;

  &lt;valueType&gt;none&lt;/valueType&gt;
  &lt;includeXcdl&gt;tasks.xml&lt;/includeXcdl&gt;
&lt;/component&gt;
</code></pre></div></div>

<h2 id="the-legalvalues-property">The <code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> property</h2>

<h3 id="purpose-18">Purpose</h3>

<p>Impose constraints on the possible values for an option.</p>

<h3 id="syntax-18">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;legalValues&gt;...&lt;/legalValues&gt;
  &lt;legalValues&gt;...&lt;/legalValues&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> property is a string containing the restrictions. Multiple instances of this property are allowed.</p>

<h3 id="default-value-11">Default value</h3>

<p>If missing, no value based constraints are imposed.</p>

<h3 id="description-18">Description</h3>

<p>Options with the number or string valueType can have an arbitrary sequence of characters as their data. In nearly all cases some restrictions have to be imposed, for example the data should correspond to a number within a certain range, or it should be one of a small number of constants. The legalValues property can be used to impose such constraints. The arguments to the property should be an XCDL list expression, see the Section called List Expressions in <a href="/xcdl/guide/packages">XCDL packages</a> for the syntactic details. Common examples include:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;legalValues&gt;0 to 0x7fff&lt;/legalValues&gt;
&lt;legalValues&gt;9600, 19200, 38400&lt;/legalValues&gt;
&lt;legalValues&gt;"RAM", "ROM"&lt;/legalValues&gt;
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">&lt;legalValues&gt;</code> property can only be used for objects with the number or string types, since it makes little sense to further constrain a boolean object.</p>

<h3 id="example-18">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name=stdDefaultOffset"&gt;

  &lt;parent&gt;libc/time&lt;/parent&gt;
  &lt;display&gt;Default Standard Time offset&lt;/display&gt;
  &lt;description&gt;This option controls the offset from UTC in
                 seconds when in local Standard Time. This
                 value can be positive or negative. It
                 can also be set at run time using the
                 os_libc_time_setzoneoffsets() function.&lt;/description&gt;

  &lt;generatedDefinition&gt;OS_INTEGER_LIBC_TIME_STD_DEFAULT_OFFSET&lt;/generatedDefinition&gt;
  &lt;valueType&gt;int&lt;/valueType&gt;
  &lt;legalValues&gt;-90000 to 90000&lt;/legalValues&gt;
  &lt;defaultValue&gt;0&lt;/defaultValue&gt;
&lt;/option&gt;
</code></pre></div></div>

<h2 id="the-parent-property">The <code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> property</h2>

<h3 id="purpose-19">Purpose</h3>

<p>Control the location of an option in the configuration hierarchy.</p>

<h3 id="syntax-19">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;parent&gt;...&lt;/parent&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> property is a string containing the id of the parent object.</p>

<h3 id="default-value-12">Default value</h3>

<p>If missing (the usual case), the surrounding object is considered the natural parent of this object. If none, the package object in the parent folder is used.</p>

<h3 id="description-19">Description</h3>

<p>Configuration objects live in a hierarchy of packages and components. By default a given object’s position in the hierarchy is a simple consequence of its position within the XCDL scripts, based on its position in the folder’s hierarchy. Packages are generally placed at the top-level of the configuration. Any <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> objects that are defined at the same level as the <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> object in a package’s top-level XCDL script are placed immediately below that package in the hierarchy (TBI). Any <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> objects that are defined in the body of a <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> command, or that are read in as a result of processing a component’s <code class="language-plaintext highlighter-rouge">&lt;includeXcdl&gt;</code> property, will be placed immediately below that <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code> in the hierarchy.</p>

<p>In some circumstances it is useful to specify an alternative position in the hierarchy for a given object. For example it is often convenient to re-parent device driver packages below <code class="language-plaintext highlighter-rouge">OS_PACKAGE_IO</code> in the configuration hierarchy, thus reducing the number of packages at the top level of the hierarchy and making navigation easier. The parent property can be used to achieve this.</p>

<p>The parent property takes a single argument, which should be the id of a <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>.</p>

<p>Although the <code class="language-plaintext highlighter-rouge">&lt;parent&gt;</code> property affects an object’s position in the overall hierarchy and hence whether or not that object is active, a re-parented object still belongs to the package that defines it (?!?!?!). By default any <code class="language-plaintext highlighter-rouge">#define</code>’s will be exported to that package’s configuration header file. Any <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> properties can only reference source files present in that package, and it is not directly possible to cause some file in another package to be built by re-parenting (???).</p>

<p>As a special case, if an empty string is specified for the parent then the object is placed at the top of the hierarchy, ahead of any packages which are not explicitly re-parented in this way. This facility is useful for configuration options such as global preferences and default compiler flags.</p>

<h3 id="example-19">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="trace"&gt;

  ...

  &lt;component name="assert buffer"&gt;

    &lt;display&gt;Buffered tracing&lt;/display&gt;
    &lt;description&gt;An output module which buffers output from tracing and
    assertion events. The stored messages are output when an
    assert fires, or OS_TRACE_PRINT() (defined in
    &lt;os/infra/os_trac.h&gt;) is called. Of course, there will
    only be stored messages if tracing per se (OS_DEBUG_USE_TRACING) is enabled above.&lt;/description&gt;

    &lt;generatedDefinition&gt;OS_DEBUG_INFRA_DEBUG_TRACE_ASSERT_BUFFER&lt;/generatedDefinition&gt;
    &lt;defaultEnable&gt;true&lt;/defaultEnable&gt;
    &lt;activeIf&gt;isEnabled('use tracing')&lt;/activeIf&gt;
    ...
  &lt;/component&gt;

  &lt;option name="size"&gt;

    &lt;display&gt;Trace buffer size&lt;/display&gt;
    &lt;description&gt;The size of the trace buffer. This counts the number of
    trace records stored. When the buffer fills it either
    wraps, stops recording, or generates output.&lt;/description&gt;

    &lt;parent&gt;trace/assert buffer&lt;/parent&gt;
    &lt;valueType&gt;int&lt;/valueType&gt;
    &lt;defaultValue&gt;32&lt;/defaultValue&gt;
    &lt;legalValues&gt;5 to 65535&lt;/legalValues&gt;
  &lt;/option&gt;

&lt;component&gt;
</code></pre></div></div>

<h2 id="the-requires-property">The <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property</h2>

<h3 id="purpose-20">Purpose</h3>

<p>List constraints that the configuration should enforce/satisfy if a given option is active and enabled.</p>

<h3 id="syntax-20">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;requires&gt;expression 1&lt;/requires&gt;
  &lt;requires&gt;expression 2&lt;/requires&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property is a string containing expressions to be evaluated as boolean. Multiple instances of this property are allowed.</p>

<h3 id="default-value-13">Default value</h3>

<p>If missing, no additional requirements will be enforced/checked.</p>

<h3 id="description-20">Description</h3>

<p>Configuration objects are not independent. For example the C library can provide thread-safe implementations of certain functions, but only if the kernel is present, if the kernel provides multi-threading, and if the kernel options related to per-thread data are enabled. It is possible to express such constraints using <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> properties.</p>

<p>The arguments to a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> property should constitute a list of goal expressions, as described in the Section called List Expressions in <a href="/xcdl/guide/packages">XCDL packages</a>. Most goal expressions are relatively simple because the constraints being described are simple, but complicated expressions can be used when necessary. If the object is active and enabled then all these constraints should be satisfied, and any goal expressions which evaluate to 0/false will result in conflicts being raised. It is possible for users to ignore such conflicts and attempt to build the current configuration anyway, but there is no guarantee that anything will work. If an object is inactive or disabled then its <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> constraints will be ignored.</p>

<p>The configuration system contains an inference engine which can resolve many types of conflicts automatically. For example, if option A is enabled and requires an option B that is currently disabled then the inference engine may attempt to resolve the conflict by enabling B. However this will not always be possible, for example there may be other constraints in the configuration which force B to be disabled at present, in which case user intervention is required.</p>

<h3 id="example-20">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;component name="serialA"&gt;

  &lt;parent&gt;powerpc/cogent&lt;/parent&gt;
  &lt;display&gt;Cogent PowerPC serial port A driver&lt;/display&gt;

  &lt;generatedDefinition&gt;OS_PACKAGE_IO_SERIAL_POWERPC_COGENT_SERIAL_A&lt;/generatedDefinition&gt;
  &lt;valueType&gt;none&lt;/valueType&gt;
  &lt;defaultEnable&gt;false&lt;/defaultEnable&gt;
  &lt;requires&gt;(isEnabled('kernel/interruptsChain') || !isEnabled('io/serial/powerpc/cogent/serialB'))&lt;/requires&gt;
  ...
&lt;/component&gt;
</code></pre></div></div>

<h2 id="the-sourcefile-property">The <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property</h2>

<h3 id="purpose-21">Purpose</h3>

<p>List the source files that should be built if this option is active and enabled.</p>

<h3 id="syntax-21">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;sourceFile&gt;file 1&lt;/sourceFile&gt;
  &lt;sourceFile&gt;file 2&lt;/sourceFile&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property is a file name containing source code to be included in the build. Multiple instances of this property are allowed.</p>

<h3 id="default-value-14">Default value</h3>

<p>If missing, no source files will be added to the build.</p>

<h3 id="description-21">Description</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property allows component developers to specify source files which should be compiled.</p>

<p>Details of the build process including such issues as compiler flags and the order in which things happen can be found in <a href="/xcdl/guide/build-process/">The build process</a>.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> properties can occur in any of <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;interface&gt;</code> objects. A <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property has effect if and only if the object that contains it is active and enabled. Typically the body of a package will define any source files that need to be built irrespective of individual options, and each component, option, and interface will define source files that are more specific. The <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property can list any number of source files. It is possible for a given source file to be specified in <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> properties for several different objects, in which case the source file will get built if any of these objects are active and enabled.</p>

<p>If the package follows the directory layout conventions then the configuration tools will search for the specified source files first in the src subdirectory of the package, then relative to the package directory itself.</p>

<p>Note: A shortcoming of the current specification of <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> properties is that there is no easy way to specify source files that should be built unless an option is enabled. It would sometimes be useful to be able to say: “if option A is enabled then compile file x.c, otherwise compile file y.c. There are two simple ways of achieving this:</p>

<ul>
  <li>
    <p>Always compile y.c, typically by listing it in the body of the <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>, but use <code class="language-plaintext highlighter-rouge">#ifndef A</code> to produce an empty object file if option A is not enabled. This has the disadvantage that the file always gets compiled and hence for some configurations builds will take longer than necessary.</p>
  </li>
  <li>
    <p>Use a computed option whose value is !A, and have a <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> y.c property in its body. This has the disadvantage of adding another calculated option to the configuration.</p>
  </li>
</ul>

<p>Note: Currently it is not possible to control the priority of a <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> property, in other words the order in which a file gets compiled relative to other build steps. This functionality might prove useful for complicated packages and should be added.</p>

<h3 id="example-21">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;package name="infra"&gt;

  &lt;display&gt;Infrastructure&lt;/display&gt;
  &lt;description&gt;Common types and useful macros.
        Tracing and assertion facilities.
        Package startup options.&lt;/description&gt;

  &lt;generatedDefinition&gt;OS_PACKAGE_INFRA&lt;/generatedDefinition&gt;
  &lt;sourceFile&gt;startup.cpp&lt;/sourceFile&gt;
  &lt;sourceFile&gt;prestart.cpp&lt;/sourceFile&gt;
  &lt;sourceFile&gt;pkgstart.cpp&lt;/sourceFile&gt;
&lt;/package&gt;
</code></pre></div></div>

<h2 id="the-valuetype-property">The <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> property</h2>

<h3 id="purpose-22">Purpose</h3>

<p>Specify the type of the value associated with a configuration object.</p>

<h3 id="syntax-22">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;valueType&gt;type&lt;/valueType&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> property can be one of the following strings:</p>

<ul>
  <li>‘enabled’</li>
  <li>‘none’</li>
  <li>‘bool’</li>
  <li>‘int’</li>
  <li>‘float’</li>
  <li>‘string’</li>
</ul>

<h3 id="default-value-15">Default value</h3>

<p>If missing, the default is <em>none</em>, except for interfaces (where the type is always a non-modifiable <em>int</em>) and for packages (where the type is <em>string</em>, and corresponds to the version of the package).</p>

<h3 id="description-22">Description</h3>

<p>The state of an XCDL configuration option is a somewhat complicated concept. This state determines what happens when a build tree is generated: it controls what files get built and what <code class="language-plaintext highlighter-rouge">#define</code>’s end up in configuration header files. The state also controls the values used during expression evaluation. The key concepts are:</p>

<ul>
  <li>
    <p>An object may or may not be loaded into the current configuration. However it is still possible for packages to reference objects which are not loaded, in a <code class="language-plaintext highlighter-rouge">&lt;requires&gt;</code> constraint or other expression. If an object is not loaded then it will have no direct effect on the build process, and 0/false will be used for expression evaluation.</p>
  </li>
  <li>
    <p>Even if an object is loaded it may still be inactive. Usually this is controlled by the object’s location in the configuration hierarchy. If an object’s parent is active and enabled then the option will normally be active. If the parent is either inactive or disabled then the object will be inactive. For example, if kernel timeslicing is disabled then <code class="language-plaintext highlighter-rouge">isEnabled('kernel/sched/timeslice/ticks')</code> is false and must have no effect. The <code class="language-plaintext highlighter-rouge">&lt;activeIf&gt;</code> property can be used to specify additional constraints. If an object is inactive then it will have no direct effect on the build process, in other words it will not cause any files to get built or <code class="language-plaintext highlighter-rouge">#define</code>’s to be generated. For the purposes of expression evaluation an inactive object has <code class="language-plaintext highlighter-rouge">isActive('...') == false</code>, <code class="language-plaintext highlighter-rouge">isEnabled('...') == false</code> and <code class="language-plaintext highlighter-rouge">valueOf(...)</code> returns 0/false.</p>
  </li>
  <li>
    <p>An object may be enabled or disabled. Most object are simple selections, for example a particular function may get inlined or it may involve a full procedure call. If an object is disabled then it has no direct effect on the build process, and for the purposes of expression evaluation <code class="language-plaintext highlighter-rouge">isEnabled('...') == false</code> and it has a <code class="language-plaintext highlighter-rouge">valueOf('...')</code> 0/false.</p>
  </li>
  <li>
    <p>An object may also have additional data associated with it, for example a numerical value used to control the size of an array, or a string used to define a greeting message.</p>
  </li>
</ul>

<p>Most objects are simple selections and do not have any additional data associated to them. For certain objects it makes sense to have the ability to disable that object or to enable it and associate data as well. Finally, when constructing an option hierarchy it is occasionally useful to have objects which serve only as placeholders. The <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code> property can be used to control all this. There are several possible values. It should be noted that the inactive state of an option takes priority over the enabled state: if an object is inactive then it is automatically not enabled, so no <code class="language-plaintext highlighter-rouge">#define</code>’s will be generated and any build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will be ignored.</p>

<p>Object with the <code class="language-plaintext highlighter-rouge">&lt;configurable&gt;</code> property set to <em>false</em> are not configurable (or not writeable), which means that the user cannot change neither the boolean part nor the data part in the configuration tools.</p>

<ul>
  <li>
    <p>enabled - is intended mainly for completeness, and is rarely needed. Objects with this type do not have any additional data associated with them, so there is no way for users to modify the option. For the purposes of expression evaluation an active object with type <em>enabled</em> has the value <em>true</em>. For active objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, so typically a single <code class="language-plaintext highlighter-rouge">#define</code> will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and a value of (1). Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
  <li>
    <p>none - is intended primarily for placeholder components in the hierarchy, although it can be used for other purposes. Objects with this type do not have any additional data associated with them. If active, such options can be manually enabled/disabled by the user (using the graphical or command line tools). For the purposes of expression evaluation an enabled object with type <em>none</em> has the value <em>true</em>. For enabled objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, so typically a single <code class="language-plaintext highlighter-rouge">#define</code> will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and a value of (1). Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
  <li>
    <p>bool - have a boolean data associated with them which can be edited by the user. For the purposes of expression evaluation an enabled object with type <em>bool</em> has the value <em>true</em> or <em>false</em>. For enabled objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, so typically a single <code class="language-plaintext highlighter-rouge">#define</code> will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and a value of <em>true/false</em>. Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
  <li>
    <p>int - have an integer data associated with them. For the purposes of expression evaluation an enabled object with type int has the value of the integer number associated. For enabled objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, so typically a single <code class="language-plaintext highlighter-rouge">#define</code> will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and an integer value. Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
  <li>
    <p>float - have a float data associated with them. For the purposes of expression evaluation an enabled object with type float has the value of the float number associated. For enabled objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, so typically a single <code class="language-plaintext highlighter-rouge">#define</code> will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and a float value. Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
  <li>
    <p>string - have a string associated with them. For the purposes of expression evaluation an enabled object with type string has the value of the associated string. For enabled objects, normal <code class="language-plaintext highlighter-rouge">#define</code> processing will take place, and two <code class="language-plaintext highlighter-rouge">#define</code> lines will be generated using the object <code class="language-plaintext highlighter-rouge">&lt;generatedDefinition&gt;</code> and the string value (if the string is empty the symbol name will be extended with <em>EMPTY</em> instead of the value). Similarly build-related properties such as <code class="language-plaintext highlighter-rouge">&lt;sourceFile&gt;</code> will take effect.</p>
  </li>
</ul>

<p>Regular objects (<code class="language-plaintext highlighter-rouge">&lt;option&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;component&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;package&gt;</code>) have the <em>none</em> type by default, but this can be changed as desired. Interfaces have the <em>int</em> type, and this cannot be changed, since the value of an interface is a count of the number of active and enabled interfaces. Packages have the <em>string</em> type, and this cannot be changed, since the value of a package is the version.</p>

<h3 id="example-22">Example</h3>

<p>TBD</p>

<h2 id="the-valueformat-property">The <code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> property</h2>

<h3 id="purpose-23">Purpose</h3>

<p>Control how an option’s value will appear in the configuration header file.</p>

<h3 id="syntax-23">Syntax</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;option name="..."&gt;

  &lt;display&gt;...&lt;/display&gt;
  &lt;description&gt;...&lt;/description&gt;

  &lt;valueFormat&gt;format&lt;/valueFormat&gt;

  ... other properties ...
  ... children objects ...

&lt;/option&gt;
</code></pre></div></div>

<p>The value of the <code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> property is a string containing a format specification.</p>

<h3 id="default-value-16">Default value</h3>

<p>The defaults, according to <code class="language-plaintext highlighter-rouge">&lt;valueType&gt;</code>, are intended to surround the value by parenthesis or double quotes:</p>

<ul>
  <li>none - ‘(%s)’</li>
  <li>bool - ‘(%s)’</li>
  <li>int - ‘(%d)’</li>
  <li>float - ‘(%f)’</li>
  <li>string - ‘“%s”’</li>
</ul>

<h3 id="description-23">Description</h3>

<p>For active and enabled objects, the configuration tools will normally generate one or two <code class="language-plaintext highlighter-rouge">#define</code> lines in the package’s configuration header file. These take the following forms:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #define &lt;name&gt; &lt;value&gt;
 #define &lt;name&gt;_&lt;value&gt;
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> property can be used to control exactly what appears as the value for the first of these <code class="language-plaintext highlighter-rouge">#define</code> lines.</p>

<p>The second <code class="language-plaintext highlighter-rouge">#define</code> will be generated only if is a valid C/C++ preprocessor symbol results, and is not affected by the <code class="language-plaintext highlighter-rouge">&lt;valueFormat&gt;</code> property.</p>

<p>The C formatting syntax is used.</p>

<h3 id="example-23">Example</h3>

<p>To format a 32bit hex value, use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;valueFormat&gt;(0x%08X)&lt;/valueFormat&gt;
</code></pre></div></div>

<h2 id="credits">Credits</h2>

<p>The initial content of this page was based on <em>Chapter 5. CDL Language Specification</em> of <em>The eCos Component Writer’s Guide</em>, by Bart Veer and John Dallaway, published in 2001.</p>


    <div class="tags">
        
    </div>

    


</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2024 Liviu Ionescu. All rights reserved. <br />
<span>Page last updated:</span> Dec 20, 2024<br/> Site last generated: Dec 20, 2024 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->




<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8WX9T80JEK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8WX9T80JEK');
</script>


</html>
