<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="A reproducible environment for building binary xPacks.">
<meta name="keywords" content=" ">
<title>The xPack Build Box | The xPack Build Framework (DEPRECATED)</title>
<link rel="stylesheet" href="https://xpack.github.io/css/syntax.css">


<link type="application/atom+xml" rel="alternate" href="https://xpack.github.io/feed.xml"/>
<link type="application/rss+xml" rel="alternate" title="web-archive-jekyll" href="https://xpack.github.io/feed.xml">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The xPack Build Box | web-archive-jekyll</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="The xPack Build Box" />
<meta name="author" content="Liviu Ionescu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<meta property="og:description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects." />
<link rel="canonical" href="https://xpack.github.io/xbb/" />
<meta property="og:url" content="https://xpack.github.io/xbb/" />
<meta property="og:site_name" content="web-archive-jekyll" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-03-09T09:04:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The xPack Build Box" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Liviu Ionescu"},"dateModified":"2024-12-20T19:13:52+00:00","datePublished":"2016-03-09T09:04:00+00:00","description":"Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.","headline":"The xPack Build Box","mainEntityOfPage":{"@type":"WebPage","@id":"https://xpack.github.io/xbb/"},"url":"https://xpack.github.io/xbb/"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://xpack.github.io/css/modern-business.css?202412202113">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://xpack.github.io/css/customstyles.css?202412202113">
<link rel="stylesheet" href="https://xpack.github.io/css/boxshadowproperties.css?202412202113">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="https://xpack.github.io/css/theme-blue.css?202412202113">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://xpack.github.io/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="https://xpack.github.io/js/toc.js"></script>
<script src="https://xpack.github.io/js/customscripts.js"></script>

<!-- Use absolute URLs, to cover preview cases too -->
<link rel="shortcut icon" href="https://xpack.github.io/images/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="57x57" href="https://xpack.github.io/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://xpack.github.io/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://xpack.github.io/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://xpack.github.io/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://xpack.github.io/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://xpack.github.io/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://xpack.github.io/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://xpack.github.io/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://xpack.github.io/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://xpack.github.io/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xpack.github.io/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://xpack.github.io/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://xpack.github.io/images/favicon/favicon-16x16.png">
<link rel="manifest" href="https://xpack.github.io/images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://xpack.github.io/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks" style="">
        <div style="display: inline-block; float: left; margin-top: 8px; margin-left: auto; margin-right: 10px;"><img src="/images/company_logo.png" alt="logo" width="32px" height="32px"/></div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> The xPack Project</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">News<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/news/">Latest News</a></li>
                        
                        
                        
                        <li><a href="/news/archive/">Archive</a></li>
                        
                        
                        
                        <li><a href="/tags/">Tags</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://xpack-dev-tools.github.io" target="_blank" rel="noopener">xPack Binary Development Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://eclipse-embed-cdt.github.io" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://micro-os-plus.github.io" target="_blank" rel="noopener">µOS++ IIIe</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GitHub<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a class="extern" href="https://github.com/xpack/" target="_blank" rel="noopener">xPack</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-dev-tools/" target="_blank" rel="noopener">3rd Party xPack Dev Tools</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/micro-os-plus/" target="_blank" rel="noopener">µOS++ IIIe</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/xpack-3rd-party/" target="_blank" rel="noopener">3rd Party xPacks</a></li>
                        
                        
                        
                        <li><a class="extern" href="https://github.com/eclipse-embed-cdt/" target="_blank" rel="noopener">Eclipse Embedded CDT</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="The xPack Build Box">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3 sticky" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">xPack Build Box </li>
  
  
  
  <li>
      <a title="Getting Started" href="#">Getting Started</a>
      <ul>
          
          
          
          <li class="active"><a title="Overview" href="/xbb/">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Prerequisites" href="/xbb/prerequisites/">Prerequisites</a></li>
          
          
          
          
          
          
          <li><a title="Linux distro versions" href="/xbb/end-of-support/">Linux distro versions</a></li>
          
          
          
          
          
          
          <li><a title="Releases" href="/xbb/releases/">Releases</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar.
this is critical so that the parent expands when you're viewing a page.
This must appear below the sidebar code above. Otherwise, if placed
inside customscripts.js, the script runs before the sidebar code runs
and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">The xPack Build Box</h1>
</div>



<div class="post-content">

   
    <div class="summary">A reproducible environment for building binary xPacks.
</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

        


   <p>The <strong>xPack Build Box</strong> (XBB) is an elaborated build environment focused on
obtaining <strong>reproducible</strong> runs while building <strong>cross-platform standalone
binaries</strong> for GNU/Linux, macOS and Windows.</p>

<h2 id="how-it-works">How it works?</h2>

<p>XBB achieves repeatability and consistency by:</p>

<ul>
  <li>controlling the versions of the tools used during the build</li>
  <li>compiling most dependencies (libraries) from sources.</li>
</ul>

<p>By strictly controlling the versions of the compiled sources and tools, it is
possible to create build environments that use about the same tools
on both GNU/Linux (Intel and Arm) and macOS, helping to obtain
consistent results.</p>

<p>On GNU/Linux, to allow the builds to be performed on any distribution,
the actual builds run inside Docker containers
(Intel/Arm, 32/64-bit).</p>

<p>On macOS, the builds run on standard systems, without the need for
custom tools, but expecting to be pristine, without additional tools
installed via alternate package managers (like HomeBrew or MacPorts).</p>

<h2 id="xbb-v500">XBB v5.0.0</h2>

<p>The v5.0.0 release from early 2023 represents a major milestone
for the xPack project, since it is the first self-sustained release,
which allows to build new binary xPacks using previous xPacks,
without requiring any custom Docker images, or other compiled tools.</p>

<h2 id="xbb-v511">XBB v5.1.1</h2>

<p>The latest release, v5.1.1 from mid 2023 updates Python 3 and adds C++
support.</p>

<h2 id="xpm-run"><code class="language-plaintext highlighter-rouge">xpm run</code></h2>

<p>For convenience, the new build scripts are xPacks, with
multiple build configurations, for all supported platforms,
and all actions are defined uniformly as <strong>xPack actions</strong>.</p>

<p>xPack actions are named sequences of shell commands, that are executed
in order when the action is invoked.</p>

<p>For example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"deep-clean"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rm -rf build xpacks node_modules package-lock.json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rm -rf ${HOME}/Work/-[0-9]*-*"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"install"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"npm install"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"xpm install"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"link-deps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"xpm link @xpack-dev-tools/xbb-helper"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"git-pull-helper"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"git -C ${HOME}/Work/xpacks/xbb-helper-xpack.git pull"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"git-log"</span><span class="p">:</span><span class="w"> </span><span class="s2">"git log --pretty='%cd * %h %s' --date=short"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test-xpm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash  scripts/test.sh --xpm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build-native"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash  scripts/build.sh"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build-native-develop"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash  scripts/build.sh --develop"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build-native-win"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash  scripts/build.sh --windows"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build-native-win-develop"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash  scripts/build.sh --develop --windows"</span><span class="w">
    </span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div></div>

<p>To invoke these actions, the <code class="language-plaintext highlighter-rouge">xpm run</code> command is used.</p>

<h2 id="the-helper-project">The helper project</h2>

<p>Since there are lots of common files between projects, they were collected
into a helper project.</p>

<p>The helper project is a
source xPack (<code class="language-plaintext highlighter-rouge">@xpack-dev-tools/xbb-helper</code>), which can be installed
as a dependency with:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/Work/xpacks/&lt;project&gt;-xpack.git
xpm <span class="nb">install</span> <span class="nt">--save-dev</span> @xpack-dev-tools/xbb-helper@latest
</code></pre></div></div>

<p>The result is a folder like:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>tree <span class="nt">-l</span> <span class="nt">-L</span> 2 xpacks/
<span class="go">xpacks/
</span><span class="gp">└── xpack-dev-tools-xbb-helper -&gt;</span><span class="w"> </span>/home/ilg/.local/xPacks/@xpack-dev-tools/xbb-helper/1.4.7
<span class="go">    ├── CHANGELOG.md
    ├── config
    ├── dependencies
    ├── developer
    ├── extras
    ├── github-actions
    ├── LICENSE
    ├── maintainer
    ├── package.json
    ├── patches
    ├── pkgconfig
    ├── README.md
    ├── scripts
    ├── templates
    ├── tests
    └── travis

13 directories, 4 files
</span></code></pre></div></div>

<p>There are many files in the helper, for various use cases. The build scripts
directly include files from the <code class="language-plaintext highlighter-rouge">scripts</code> and <code class="language-plaintext highlighter-rouge">dependencies</code> folders.</p>

<h2 id="types-of-builds">Types of builds</h2>

<p>From the point of view of the desired result, there are two types of builds:</p>

<ul>
  <li>local/native builds, intended for development and running on the local
machine</li>
  <li>distribution builds, intended for xPack binary distributions and running
on most modern machines</li>
</ul>

<p>The main use cases of XBBs are distribution builds, but they can be used
for native builds as well.</p>

<h3 id="native-builds-with-all-tools-from-the-host-machine">Native builds with all tools from the host machine</h3>

<p>In this case all build tools are expected to be available on the
host machine. The list of these dependency depends on the distribution
and is outside the scope of this project, which recommends the next
use Docker use case, presented below.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xpm run <span class="nb">install
</span>xpm run build-native
</code></pre></div></div>

<p>The first command is used to install the helper project;
the second command runs the build.</p>

<p>These commands run the same on both GNU/Linux and macOS.</p>

<p>To generate the Windows binaries on GNU/Linux, there is a
separate build action:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xpm run <span class="nb">install
</span>xpm run build-native-win
</code></pre></div></div>

<h3 id="native-builds-with-the-major-tools-coming-from-xpacks">Native builds with the major tools coming from xPacks</h3>

<p>Sometimes the native tools available on the host machine may be too old
for building modern packages.</p>

<p>A simple solution is to install the main tools as binary xPacks. The
selection of tools depends on the target platform.</p>

<p>The existing projects include separate build configurations for
multiple platforms (darwin-x64, darwin-arm64, linux-x64, linux-arm64,
linux-arm, win32-x64).</p>

<p>For example, to build the Intel GNU/Linux binaries, use:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xpm run <span class="nb">install
</span>xpm run <span class="nb">install</span> <span class="nt">--config</span> linux-x64
xpm run build <span class="nt">--config</span> linux-x64
</code></pre></div></div>

<h3 id="docker-builds-with-tools-coming-from-xpacks">Docker builds with tools coming from xPacks</h3>

<p>An even more reproducible configuration can be achieved by using
Docker containers, with the base system tools.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xpm run <span class="nb">install
</span>xpm run docker-prepare <span class="nt">--config</span> linux-x64
xpm run docker-build <span class="nt">--config</span> linux-x64
</code></pre></div></div>

<h3 id="writable-helper-scripts">Writable helper scripts</h3>

<p>For normal builds, the helper project, which is a source xPack,
is downloaded and marked as read-only, to prevent damaging it.</p>

<p>For development purposes it might be necessary to update it; the
xPack solution (inspired by the npm solution) is to download the
helper repository into a separate location, and link it to the
current project.</p>

<p>This is done in two steps, first a link from the central store to the
helper repo is created. This ensures that multiple projects can
conveniently use the writable helper.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> ~/Work/xpacks/xbb-helper-xpack.git <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/Work/xpacks <span class="o">&amp;&amp;</span> <span class="se">\</span>
git clone <span class="se">\</span>
  <span class="nt">--branch</span> xpack-develop <span class="se">\</span>
  https://github.com/xpack-dev-tools/xbb-helper-xpack.git <span class="se">\</span>
  ~/Work/xpacks/xbb-helper-xpack.git <span class="o">&amp;&amp;</span> <span class="se">\</span>
xpm <span class="nb">link</span> <span class="nt">-C</span> ~/Work/xpacks/xbb-helper-xpack.git
</code></pre></div></div>

<p>The result is a link like:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-lA</span> ~/.local/xPacks/@xpack-dev-tools/xbb-helper
<span class="go">total 4
dr-xr-xr-x 14 ilg ilg 4096 Mar 24 17:38 1.4.7
</span><span class="gp">lrwxrwxrwx  1 ilg ilg   42 Mar 27 17:16 .link -&gt;</span><span class="w"> </span>/home/ilg/Work/xpacks/xbb-helper-xpack.git
</code></pre></div></div>

<p>In other words, in the folder where versioned releases are installed,
a special hidden symbolic link is created, pointing to the location where
the repo was cloned.</p>

<p>In the second step, a link from the build project to the central store
is created.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xpm <span class="nb">link</span> @xpack-dev-tools/xbb-helper <span class="nt">-C</span> ~/Work/xpacks/&lt;project&gt;-xpack.git
</code></pre></div></div>

<p>The result is a link like:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">cd</span> ~/Work/xpacks/&lt;project&gt;-xpack.git
<span class="gp">$</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> xpacks/
<span class="go">total 0
</span><span class="gp">lrwxrwxrwx 1 ilg ilg 57 Mar 27 17:21 xpack-dev-tools-xbb-helper -&gt;</span><span class="w"> </span>/home/ilg/.local/xPacks/@xpack-dev-tools/xbb-helper/.link
</code></pre></div></div>

<p>In other words, the <code class="language-plaintext highlighter-rouge">xpack-dev-tools-xbb-helper</code> link, instead of pointing
to a version, like <code class="language-plaintext highlighter-rouge">/home/ilg/.local/xPacks/@xpack-dev-tools/xbb-helper/1.4.7</code>,
now points to the <code class="language-plaintext highlighter-rouge">.link</code>, which points to the cloned repo.</p>

<p>This double link mechanism allows multiple projects to refer to the writable
folder, and allow this folder to be easily moved to another location
without having to update all projects that reference it.</p>

<p>For details on the actual usage, please check the
build projects.</p>

<h2 id="supported-platforms">Supported platforms</h2>

<p>Generally, xPack binaries are available for the following platforms:</p>

<ul>
  <li>Windows Intel 64-bit</li>
  <li>GNU/Linux Intel 64-bit</li>
  <li>GNU/Linux Arm 32-bit</li>
  <li>GNU/Linux Arm 64-bit</li>
  <li>macOS Intel 64-bit</li>
  <li>macOS Apple Silicon 64-bit</li>
</ul>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Starting with 2022, support for
macOS Apple Silicon was added; 32-bit support for Windows and
GNU/Linux Intel was discontinued.</div>

<p>XBB supports creating binaries for all these platforms.</p>

<p>For the detailed supported versions, please check the specific
<a href="/xbb/releases/">release</a> page.</p>

<h3 id="gnulinux-arm-binaries">GNU/Linux Arm binaries</h3>

<p>Support for Arm binaries was added in v3.1, in early 2020.</p>

<p>The supported architectures are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">arm64v8</code> - the ARMv8 64-bit architecture Aarch64</li>
  <li><code class="language-plaintext highlighter-rouge">arm32v7</code> - the ARMv7 32-bit architecture with hardware float (armhf)</li>
</ul>

<h3 id="macos-apple-silicon">macOS Apple Silicon</h3>

<p>Support for Apple Silicon was added in v3.4, in late 2021.</p>

<h2 id="docker-specifics">Docker specifics</h2>

<p>As with any Docker builds, the XBB builds run completely inside Docker
containers, which start afresh each time they are instantiated.</p>

<p>To pass the folder with the build scripts in and the results out,
it is usual to use a <code class="language-plaintext highlighter-rouge">Work</code> folder, for example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-it</span> <span class="nt">--volume</span> <span class="s2">"</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span><span class="s2">/Work:/Host/Work"</span> ilegeul/ubuntu:amd64-18.04-xbb-v5.0.0
<span class="gp">root@bc7071f2c78a:/#</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span> Host/Work/xpacks
<span class="go">total 8
drwxrwxr-x 11 node node 4096 Mar 24 15:39 openocd-xpack.git
drwxrwxr-x 17 node node 4096 Mar 27 14:15 xbb-helper-xpack.git
</span></code></pre></div></div>

<p>In this simple configuration, the builds run with root permissions; with
more elaborate configurations it is possible to start the Docker containers
with user rights, but they are beyond the scope of this document.</p>

<h2 id="how-to-use-the-xbb-tools">How to use the XBB tools</h2>

<p>Both on GNU/Linux and macOS, the XBB tools are installed as binary
xPack dependencies in <code class="language-plaintext highlighter-rouge">xpacks/.bin</code> and are fully distinct from
the system tools.</p>

<p>To access them, the application should update the <code class="language-plaintext highlighter-rouge">PATH</code> to prefer
the <code class="language-plaintext highlighter-rouge">xpacks/.bin</code> path.</p>

<h3 id="common-scripts">Common scripts</h3>

<p>For consistency between projects, common scripts were grouped in the
helper project.</p>

<p>After installing it with <code class="language-plaintext highlighter-rouge">xpm install</code>, the scripts are available
from <code class="language-plaintext highlighter-rouge">xpacks/xpack-dev-tools-xbb-helper</code>.</p>

<p>There are many scripts in this location; the main ones are in the
<code class="language-plaintext highlighter-rouge">scripts</code> folder. The scripts to build various dependencies are in
the <code class="language-plaintext highlighter-rouge">dependencies</code> folder.</p>

<h3 id="the-pkg-config-verbose-script">The <code class="language-plaintext highlighter-rouge">pkg-config-verbose</code> script</h3>

<p>While running the configuration step, it is sometimes useful to trace
how <code class="language-plaintext highlighter-rouge">pkg-config</code> identifies resources to be used during the build.</p>

<p>The standard <code class="language-plaintext highlighter-rouge">pkg-config</code> does not have an option to increase verbosity.</p>

<p>The workaround is to use a separate script that displays the received command
and the response on the stderr stream.</p>

<p>This script is not specific to XBB, and can be used with any build.</p>

<p>For this, copy the file into <code class="language-plaintext highlighter-rouge">.../xbb/bin</code> or any other folder present
in the PATH and pass the script name via the environment.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x /opt/xbb/bin/pkg-config-verbose
<span class="nb">export </span><span class="nv">PKG_CONFIG</span><span class="o">=</span>pkg-config-verbose
</code></pre></div></div>

<h2 id="no-more-tex">No more TeX</h2>

<p>Starting with v3.4, support for building the manuals was dropped,
and the TeX tools are no longer needed.</p>

<h2 id="maintainer-info">Maintainer info</h2>

<ul>
  <li><a href="https://github.com/xpack/xpack-build-box/blob/master/README-MAINTAINER.md">README-MAINTAINER</a></li>
</ul>

<h2 id="end-of-support-for-linux-distributions">End of support for Linux distributions</h2>

<p>To help decide what base version to use, and how long to keep support for it,
a list of main Linux distributions was compiled, with the GLIBC versions:</p>

<ul>
  <li><a href="/xbb/end-of-support/">end of support</a></li>
</ul>

<h2 id="upgrade-plans">Upgrade plans</h2>

<p>RedHat maintenance support 1 for RHEL 7 ended in Aug. 2020, with
maintenance support 2 to last until June. 2024. However XBB support
for RHEL 7 is a tough requirement, and was discontinued starting with 2022.</p>

<p>Compatibility was moved up to
<strong>Ubuntu 18 LTS</strong> (<strong>GLIBC 2.27</strong>), which also provides compatibility with
RedHat 8 / Debian 10, which both use GLIBC 2.28.</p>

<p>The next upgrade step will be taken when the minimum Node.js becomes 18.x,
which requires GLIBC 2.28, when the base system will be
<strong>Debian 10</strong> (planned for mid-2024).</p>

<h2 id="credits">Credits</h2>

<p>The xPack Build Box is inspired by the
<a href="https://github.com/phusion/holy-build-box">Holy Build Box</a>.</p>

<h2 id="links">Links</h2>

<ul>
  <li><a href="/xbb/prerequisites/">prerequisites</a> for using XBB</li>
  <li><a href="/xbb/releases/">releases</a></li>
  <li><a href="https://github.com/xpack/xpack-build-box/">GitHub</a></li>
</ul>


    <div class="tags">
        
    </div>

    


</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2024 Liviu Ionescu. All rights reserved. <br />
<span>Page last updated:</span> Dec 20, 2024<br/> Site last generated: Dec 20, 2024 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->




<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8WX9T80JEK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8WX9T80JEK');
</script>


</html>
